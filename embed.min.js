(function(){"use strict";var RiddleTrackNetworks=(e=RiddleTrackNetworks||{},e.customTracking="customTracking",e.facebookPixel="facebookPixel",e.googleAnalytics="googleAnalytics",e.googleAnalytics4="googleAnalytics4",e.googleTagManager="googleTagManager",e.matomoTag="matomoTag",e.adobe="adobe",e.customer="customer",e),e;function AddLoader(e){const t="true"===e.wrapper.getAttribute("data-is-qzzr");e.wrapper.insertAdjacentHTML("beforeend",`<style>\n            [${e.uuidAttr}] .rid-load {\n                background: ${e.config.colorBackground};\n            }\n            [${e.uuidAttr}] .rid-load i {\n                background: ${e.config.colorBackground};\n            }\n            [${e.uuidAttr}] .rid-load i:before {\n                border-color: ${e.config.colorForeground};\n            }\n            .rid-load {\n                padding-top: 56%;\n                border-radius: 24px;\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                transition: opacity ease-out 0.5s;\n                box-sizing: border-box;\n            }\n            .rid-load p {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                margin: -8px;\n            }\n            .rid-load i {\n                position: absolute;\n                display: block;\n                width: 20px;\n                height: 20px;\n                border-radius: 5px;\n                left: -8px;\n                animation: 3s infinite rid-icon;\n                transform: scale(1) rotate(30deg);\n            }\n            .rid-load i:before {\n                box-sizing: border-box;\n                content: '';\n                display: block;\n                position: absolute;\n                left: 2px;\n                right: 2px;\n                bottom: 2px;\n                top: 2px;\n                border: 2px solid;\n                border-radius: 3px;\n            }\n            .rid-load i+i {\n                left: 0;\n                top: -4px;\n                transform: scale(1) rotate(45deg);\n            }\n            .rid-load i+i+i {\n                left: 8px;\n                top: 0;\n                transform: scale(1) rotate(60deg);\n            }\n            @keyframes rid-icon {\n                40% {\n                    left:  0;\n                    top: 0;\n                    transform: scale(1) rotate(0);\n                }\n                60% {\n                    left:  0;\n                    top: 0;\n                    transform: scale(1) rotate(0);\n                }\n            }\n\n            @keyframes largeCircleMove {\n                0%, 25% {\n                    width: 20px;\n                    height: 20px;\n                    left: -3px;\n                    top: -3px;\n                }\n                75%, 100% {\n                    width: 14px;\n                    height: 14px;\n                    left: 0px;\n                    top: 0px;\n                }\n            }\n\n            @keyframes largeCircleColor {\n                0%, 25% {\n                    background-color: ${e.config.colorForeground};\n                }\n                45% {\n                    background-color: ${e.config.colorForeground};\n                }\n                75%, 100% {\n                    background-color: transparent;\n                }\n            }\n\n            @keyframes smallCircleMove {\n                0%, 25% {\n                    width: 0px;\n                    height: 0px;\n                    left: 7px;\n                    top: 7px;\n                    opacity: 0;\n                    background-color: ${e.config.colorForeground};\n                }\n                75%, 100% {\n                    width: 4px;\n                    height: 4px;\n                    left: 5px;\n                    top: 15px;\n                    opacity: 1;\n                    background-color: ${e.config.colorForeground};\n                }\n            }\n\n            .rid-load--qzzr {\n                i {\n                    border-radius: 100px;\n                    width: 14px;\n                    height: 14px;\n                    transform: none;\n                    Box-sizing: border-box;\n                    &:before {\n                        display: none;\n                    }\n                    &:nth-child(1) {\n                        animation:\n                            largeCircleMove 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) infinite alternate,\n                            largeCircleColor 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) infinite alternate;\n                        animation-fill-mode: both;\n                    }\n                    &:nth-child(1) {\n                        border: 3px solid ${e.config.colorForeground};\n                    }\n                    &:nth-child(2) {\n                        animation: smallCircleMove 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) infinite alternate;\n                        animation-fill-mode: both;\n                    }\n                    &:nth-child(3) {\n                        display: none;\n                    }\n                }\n            }\n        </style>\n        <div class="rid-load${t?" rid-load--qzzr":""}">\n            <p><i></i><i></i><i></i></p>\n        </div>`),e.wrapper.style.position="relative",e.wrapper.style.overflow="hidden",e.wrapper.style.transition="height ease-out 0.5s";const i=e.wrapper.getElementsByClassName("rid-load")[0];i&&(e.wrapper.style.height=i.getBoundingClientRect().height+"px",i.style.height="100%")}function RemoveLoader(e){const t=e.wrapper.getElementsByClassName("rid-load")[0];if(t){t.style.opacity="0",e.wrapper.style.height=e.iframe.getBoundingClientRect().height+"px";const i=setInterval((()=>{e.wrapper.style.height=e.iframe.getBoundingClientRect().height+"px"}),10);setTimeout((()=>{clearInterval(i),e.wrapper.style.removeProperty("position"),e.wrapper.style.removeProperty("overflow"),e.wrapper.style.removeProperty("transition"),e.wrapper.style.removeProperty("height"),t.parentNode?.removeChild(t),e.wrapper.removeChild(e.wrapper.children[e.wrapper.children.length-1])}),500)}}class Riddle2{id;uuidAttr;hasLoaded;wrapper;iframe;_isInFrameDetected=!1;_prevBodyOverflow="";config;constructor(e){e.classList.add("inited"),this.id=e.getAttribute("data-rid-id")||"",this.uuidAttr="data-riddle-v2-"+window.riddle2API.riddles.length,e.setAttribute(this.uuidAttr,""),this.hasLoaded=!1,this.wrapper=e,this.iframe=e.getElementsByTagName("iframe")[0],this.config={autoScroll:"false"!==e.getAttribute("data-auto-scroll"),autoScrollOffset:isNaN(parseInt(e.getAttribute("data-auto-scroll-offset")||""))?0:parseInt(e.getAttribute("data-auto-scroll-offset")||""),colorBackground:e.getAttribute("data-bg")||"#fff",colorForeground:e.getAttribute("data-fg")||"#00205b",isFixedHeightEnabled:"true"===e.getAttribute("data-is-fixed-height-enabled"),fixedHeight:e.getAttribute("data-fixed-height")||"650px"};var t=this.iframe.style;t.border="none",t.width="100%",t.position="absolute",t.opacity="0",AddLoader(this),this.sendMessage({isRiddleApi:!0,type:"requestRiddleStatus"})}sendMessage(e){this.iframe.contentWindow?.postMessage(e,"*")}InitComplete(){if(!this.hasLoaded){this.hasLoaded=!0;let e=this.iframe.style;e.opacity="1",e.position="static",this.config.isFixedHeightEnabled&&(e.height=this.config.fixedHeight),RemoveLoader(this)}}UpdateHeight(e){this.iframe.style.setProperty("height",e+"px","important");let t=!1;try{t=window.self!==window.top}catch{t=!0}t&&(e>.95*document.documentElement.scrollHeight&&e<1.05*document.documentElement.scrollHeight&&1==window.riddle2API.riddles.length?this._isInFrameDetected||(this._isInFrameDetected=!0,this._prevBodyOverflow=document.body.style.overflow,document.body.style.overflow="hidden"):this._isInFrameDetected&&(this._isInFrameDetected=!1,document.body.style.overflow=this._prevBodyOverflow))}LazyLoad(e,t,i){let n=this.wrapper.getAttribute("data-embed-url");if(null!=e&&null!=t&&null!=i&&n&&this.iframe.src!=n&&!this.iframe.src.includes("riddle.com")){var o=e+this.wrapper.getBoundingClientRect().height;(t<=e&&e<=i||t<=o&&o<=i)&&(this.iframe.src=n)}}HideRiddle=()=>{this.wrapper.style.display="none"}}const validateDataLayerItem=(e,t)=>{const i=["string","number"];let n=!0;return"object"!=typeof t&&(console.log("typeof DataLayerItem:",typeof t),console.log('DataLayerItem must be an object like: { key: "key", value: "value" || 0 }'),n=!1),"string"!=typeof t.key&&(console.log("typeof DataLayerItem.key:",typeof t.key),console.log('DataLayerItem must have a "key"'),n=!1),i.includes(typeof t.value)||(console.log("typeof DataLayerItem.value:",typeof t.value),console.log('DataLayerItem must have a "value" of type: '+i.join(" or ")),n=!1),n&&e.push(t),n};class DataLayer{constructor(){this.initDataLayer(),this.readFromUrl()}initDataLayer(){let e=[];const t=window.riddleDataLayer;if(t){let i=!0;t.forEach((e=>{i&&(i=validateDataLayerItem([],e))})),i&&(e=JSON.parse(JSON.stringify(t)))}const i={set:this.setHandler};window.riddleDataLayer=new Proxy(e,i)}readFromUrl(){const e=window.location.search,t=new URLSearchParams(e),i=Object.fromEntries(t.entries());for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];this.push({key:e,value:t})}}readFromIframeSrc(e){if(!e||"string"!=typeof e)return;const t=new URL(e),i=Object.fromEntries(t.searchParams.entries());for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=i[e];this.push({key:e,value:t})}}push(e){if(window.riddleDataLayer){const t=window.riddleDataLayer.findIndex((t=>t.key===e.key));-1===t?window.riddleDataLayer.push(e):window.riddleDataLayer[t]=e}}notifyAll(){const e=this;window.riddle2API.riddles.forEach((t=>{e.notifyRiddle(t)}))}notifyRiddle(e){e.sendMessage({dataLayer:JSON.parse(JSON.stringify(window.riddleDataLayer)),riddleQueryString:window.location.href.split("?")[1],riddleParentLocation:window.location.href})}setHandler(e,t,i){if("length"===t)return e[t]=i,!0;const n=validateDataLayerItem(e,i);return n&&window.riddle2API?.riddles.forEach((e=>{e.sendMessage({dataLayerItem:i})})),n}}let dataLayerInstance=window.riddle2API?.dataLayer;dataLayerInstance||(dataLayerInstance=new DataLayer),Object.freeze(dataLayerInstance);const dataLayerInstance$1=dataLayerInstance;var originalWidth;function toggleFullScreen(e){var t=document.querySelectorAll('[data-rid-id="'+e+'"]'),i=t[0].getElementsByTagName("iframe")[0],n=document.getElementById("riddleFullScreenButton-"+e),o=document.body;null==originalWidth&&(originalWidth=t[0].style.width),0==window.riddleAPI.isFullScreen?requestFullScreen(o,t[0],i,n):exitFullScreen(t[0],i,n)}function requestFullScreen(e,t,i,n){var o="";e.requestFullscreen?(e.requestFullscreen(),o="fullscreenchange"):e.msRequestFullscreen?(e.msRequestFullscreen(),o="MSFullscreenChange"):e.mozRequestFullScreen?(e.mozRequestFullScreen(),o="mozfullscreenchange"):e.webkitRequestFullScreen&&(e.webkitRequestFullScreen(),o="webkitfullscreenchange"),document.addEventListener(o,(function(){fullscreenChange(t,i,n)}))}function exitFullScreen(e,t,i){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen(),fullscreenChange(e,t,i)}function fullscreenChange(e,t,i){document.fullscreenEnabled||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement?(e.style.position="fixed",e.style.width="100%",e.style.top="0",e.style.left="0",e.style.background="#fff",e.style.setProperty("height","100%","important"),t.style.setProperty("height","100%","important"),i.style.position="fixed",i.style.bottom="20px",i.style.left="48%",window.riddleAPI.isFullScreen=!0):(e.style.position="static",e.style.top="0",e.style.left="0",e.style.width=originalWidth,e.style.setProperty("height","auto"),i.style.position="static",window.riddleAPI.isFullScreen=!1)}var scrollPosition$1=0;function sendPositionData(){for(var e=0;e<window.riddleAPI.riddles.length;e++){var t=window.riddleAPI.riddles[e].getElementsByTagName("iframe")[0],i=t.getBoundingClientRect().top+window.scrollY||window.pageYOffset,n=window.scrollY||window.pageYOffset,o=n+window.innerHeight;t.contentWindow.postMessage({iframeOffetTop:i,viewtop:n,viewbottom:o},"*"),checkIframe(i,n,o,t)}}function checkIframe(e,t,i,n){if(null!=e&&null!=t&&null!=i&&n.src!=n.parentElement?.getAttribute("data-embed-url")&&-1==n.src.indexOf("riddle.com")){var o=e+(n.parentElement?.getBoundingClientRect().height??0);(t<=e&&e<=i||t<=o&&o<=i)&&(n.src=n.parentElement?.getAttribute("data-embed-url")??"")}}function setScrollPosition(e){scrollPosition$1=e}function onWindowMessage$1(e){if("object"==typeof e.data){if(e.data.isRiddle2Event)for(var t=0;t<window.riddleAPI.riddles.length;t++){var i=(n=window.riddleAPI.riddles[t]).getElementsByTagName("iframe")[0];if(e.source===i.contentWindow){window.riddle2API.initRiddle(n);break}}for(t=0;t<window.riddleAPI.riddles.length;t++){var n;i=(n=window.riddleAPI.riddles[t]).getElementsByTagName("iframe")[0];if(e.source==i.contentWindow){if(e.data.riddleHeight){var o=i.style;if(window.riddleAPI.isFullScreen||o.setProperty("height",e.data.riddleHeight+"px","important"),0==o.opacity){o.opacity=1,o.position="static";for(var r=window.riddleAPI.riddles[t].getElementsByClassName("rid-load");r.length>0;)r[0].parentNode.removeChild(r[0])}null!=window.parent&&window.parent.postMessage({riddleHeight:e.data.riddleHeight+55,riddleId:e.data.riddleId},"*"),-1!=window.location.href.indexOf("?")&&postQueryStringToRiddle(n),postLocationHrefToRiddle(n),sendPositionData()}if(e.data.riddleEvent&&window.onRiddleEvent&&window.onRiddleEvent(e.data.riddleEvent,i),"page-change"!=e.data.riddleEvent||"false"==n.getAttribute("data-auto-scroll")||e.data.isUnrolledQuiz)"page-change"==e.data.riddleEvent&&"false"==n.getAttribute("data-auto-scroll")&&(preventSiteJump$1(),sendPositionData());else{var a=0;isNaN(n.getAttribute("data-auto-scroll-offset"))||(a=n.getAttribute("data-auto-scroll-offset")),i.scrollIntoView(!0),window.scrollBy(0,-10-a),sendPositionData()}if(e.data.riddleEvent&&"answer-poll"==e.data.riddleEvent.action&&"false"==n.getAttribute("data-auto-scroll")&&preventSiteJump$1(),null!=e.data.redirectToCustomLandingpagePath&&null!=e.data.redirectToCustomLandingpageData){var d=e.data.redirectToCustomLandingpagePath,l=e.data.redirectToCustomLandingpageData,s=window.parent.document.createElement("form");s.setAttribute("method","post"),s.setAttribute("action",d);var c=window.parent.document.createElement("input");c.setAttribute("type","hidden"),c.setAttribute("name","data"),c.setAttribute("value",l),s.appendChild(c),window.parent.document.body.appendChild(s),s.submit()}}}}}function preventSiteJump$1(){var e=document.documentElement;setScrollPosition((window.pageYOffset||e.scrollTop)-(e.clientTop||0))}function postQueryStringToRiddle(e){e.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleQueryString:window.location.href.split("?")[1]},"*")}function postLocationHrefToRiddle(e){e.getElementsByTagName("iframe")[0].contentWindow.postMessage({riddleParentLocation:window.location.href},"*")}document.addEventListener("scroll",(function(e){0!=scrollPosition$1&&(window.scrollTo(0,scrollPosition$1),scrollPosition$1=0),sendPositionData()})),window.riddleAPI||init();const riddleV1API=window.riddleAPI;function init(){window.riddleAPI={init:initRiddle$1,update:()=>{},riddles:[],toggleFullScreen:toggleFullScreen,isFullScreen:!1},window.addEventListener("message",onWindowMessage$1,!1)}function initRiddle$1(e){if(!e.classList.contains("riddle-target-initialised")){e.className="riddle-target-initialised";var t="data-riddle-"+window.riddleAPI.riddles.length;e.setAttribute(t,"");var i=e.getElementsByTagName("iframe");if(0==i.length){var n=e.getAttribute("data-url")||e.getAttribute("data-game");if(!n)return;e.innerHTML+='<iframe src="'+n+'"></iframe>'}var o=i[0].style;if(o.border="none",o.width="100%",o.position="absolute",o.opacity="0",0==e.getElementsByClassName("rid-load").length){var r=e.getAttribute("data-fg")||"#1486cd",a=e.getAttribute("data-bg")||"#fff";e.insertAdjacentHTML("beforeend","<style>["+t+"] .rid-load {background: "+a+";}["+t+"] .rid-load i {background: "+r+';}.rid-load {border: 1px solid #cfcfcf!important;padding-top: 56%;border-radius: 5px;position: relative;}.rid-load p {position: absolute;top: 50%;left: 50%;margin: -8px}.rid-load i {position: absolute;width: 16px;height: 16px;border-radius: 3px;left: -25px;-webkit-animation: 1s infinite rid-icon;animation: 1s infinite rid-icon;-webkit-transform: scale(.4) rotate(62deg);transform: scale(.4) rotate(62deg);opacity: 0;}.rid-load i+i {-webkit-animation-delay: .17s;animation-delay: .17s;left: 0;}.rid-load i+i+i {-webkit-animation-delay: .34s;animation-delay: .34s;left: 25px;}@-webkit-keyframes rid-icon {50% {   opacity: 1;-webkit-transform: scale(1) rotate(62deg);}}@keyframes rid-icon {50% {opacity: 1;transform: scale(1) rotate(62deg);}}</style><div class="rid-load"><p><i></i><i></i><i></i></p></div>')}window.riddleAPI.riddles.push(e),sendPositionData()}}class RiddleStorage{riddleStorage=[];isLocalStorageAvailable=!1;isLocalStorageFull=!1;constructor(){this.ensureLocalStorage(),this.initRiddleStorage()}ensureLocalStorage(){try{if(typeof window.localStorage<"u")try{const e="__storage_test__";window.localStorage.setItem(e,"test"),window.localStorage.removeItem(e),this.isLocalStorageAvailable=!0}catch(e){this.isLocalStorageAvailable=!1,this.handleStorageError(e)}}catch{this.isLocalStorageAvailable=!1}}handleStorageError(e){e instanceof DOMException&&"QuotaExceededError"===e.name&&window.localStorage&&0!==window.localStorage.length&&(this.isLocalStorageFull=!0,this.isLocalStorageAvailable=!0)}initRiddleStorage(){if(!this.isLocalStorageAvailable)return;const e=this.decryptValue(window.localStorage.getItem("riddleStorage"));if(e){const t=JSON.parse(e);Array.isArray(t)&&(this.riddleStorage=t)}}encryptValue(e){return btoa(e.toString())}decryptValue(e){return e?atob(e.toString()):""}setItem(e,t){if(!this.isLocalStorageAvailable||this.isLocalStorageFull)return;const i=this.riddleStorage.findIndex((t=>t.key===e));-1!==i?this.riddleStorage[i].value=t:this.riddleStorage.push({key:e,value:t});try{window.localStorage.setItem("riddleStorage",this.encryptValue(JSON.stringify(this.riddleStorage)))}catch(e){this.handleStorageError(e)}}getItem(e){const t=this.riddleStorage.find((t=>t.key===e));return t?t.value:null}deleteItem(e){this.isLocalStorageAvailable&&(e.forEach((e=>{const t=this.riddleStorage.findIndex((t=>t.key===e.key));-1!==t&&this.riddleStorage.splice(t,1)})),window.localStorage.setItem("riddleStorage",this.encryptValue(JSON.stringify(this.riddleStorage))))}getRiddleStorage(){return this.riddleStorage}notifyAll(){const e=this;window.riddle2API.riddles.forEach((t=>{e.notifyRiddle(t)}))}notifyRiddle(e){e.sendMessage({riddleStorage:JSON.parse(JSON.stringify(this.riddleStorage)),type:"riddleStorageRead"}),e.sendMessage({type:"RiddleStorageInited"})}}let riddleStorageInstance=window.riddle2API?.riddleStorage;riddleStorageInstance||(riddleStorageInstance=new RiddleStorage),Object.freeze(riddleStorageInstance);const riddleStorageInstance$1=riddleStorageInstance;let riddle2API;function initAPI(){const e=dataLayerInstance$1,t=riddleStorageInstance$1;riddle2API=window.riddle2API={initRiddle:initRiddle,checkForNewRiddles:checkForNewRiddles,riddles:[],isFullScreen:!1,msgBacklog:[],isDOMReady:!1,dataLayer:e,riddleStorage:t},window.addEventListener("message",onWindowMessage,!1),"loading"==document.readyState?document.addEventListener("DOMContentLoaded",(()=>{riddle2API.isDOMReady=!0,checkForNewRiddles(),WorkMsgBacklog()})):(riddle2API.isDOMReady=!0,checkForNewRiddles())}function WorkMsgBacklog(){for(;riddle2API.msgBacklog.length>0;){onWindowMessage(riddle2API.msgBacklog.splice(0,1)[0])}}var riddle2IntervalCheck;function checkForNewRiddles(){clearTimeout(riddle2IntervalCheck);var e=document.body.querySelectorAll(".riddle2-wrapper, .riddle_target");for(const t of e)isRiddleV1(t.getAttribute("data-rid-id")??"")?riddleV1API.init(t):initRiddle(t);riddle2IntervalCheck=setTimeout(checkForNewRiddles,1e3)}function isRiddleV1(e){return/^[0-9]+$/.test(e)}function initRiddle(e){if(!e.classList.contains("inited")){const t=new Riddle2(e);riddle2API.riddles.push(t),riddle2API.dataLayer?.readFromIframeSrc(t.iframe.src),sendPositionDataToIframes()}}function onWindowMessage(e){if("object"!=typeof e.data||!e.data.isRiddle2Event)return;const t=e.data,i=riddle2API.riddles.find((t=>e.source===t.iframe.contentWindow));if(i&&riddle2API.isDOMReady){if("string"==typeof e.data.category&&e.data.category.startsWith("RiddleTrackEvent")){pushTrackEvent(e.data)}if(null!=window.parent){const e=JSON.parse(JSON.stringify(t));window.parent.postMessage(e,"*")}"RiddleStorageInit"===t.type&&riddle2API.riddleStorage?.notifyRiddle(i),"RiddleStorageDelete"===t.type&&riddle2API.riddleStorage?.deleteItem(t.riddleStorageData),"RiddleInited"===t.type&&(i.InitComplete(),riddle2API.dataLayer?.notifyRiddle(i),riddle2API.riddleStorage?.notifyRiddle(i)),"RiddleStorageAdd"===t.type&&t.riddleStorageData&&t.riddleStorageData.forEach((e=>{riddle2API.riddleStorage?.setItem(e.key,e.value)})),t.height&&!i.config.isFixedHeightEnabled&&i.UpdateHeight(t.height),t.hideRiddle&&i.HideRiddle(),e.data.riddle2Event&&window.onRiddle2Event&&window.onRiddle2Event(t,i.iframe),t.height&&sendPositionDataToIframes(),"Block_View"===e.data.action&&sendPositionDataToIframes();const n="Block_View_AnswerExplanation"===e.data.action&&e.data.blockOptions.answerExplanationOptions&&"Overlay"===e.data.blockOptions.answerExplanationOptions.position;if(i.config.autoScroll&&!t.isUnrolled&&"Block_View_AnswerExplanation"===e.data.action&&e.data.blockOptions.answerExplanationOptions&&"BelowAnswers"===e.data.blockOptions.answerExplanationOptions.position){const e=i.iframe.getBoundingClientRect().bottom+window.scrollY-window.innerHeight+10;window.scrollTo({top:e,behavior:"smooth"}),sendPositionDataToIframes()}else if("PageChanged"!=t.type&&!n&&"Block_View"!==e.data.action||!i.config.autoScroll||t.isUnrolled)"PageChanged"==t.type&&!i.config.autoScroll&&(preventSiteJump(),sendPositionDataToIframes());else{const e=i.iframe.getBoundingClientRect().top+window.scrollY-10-i.config.autoScrollOffset;window.scrollTo({top:e,behavior:"smooth"}),sendPositionDataToIframes()}if("AnswerPoll"===t.type&&!i.config.autoScroll&&preventSiteJump(),t.redirectToCustomLandingPage){const e=t.redirectToCustomLandingPage.path,i=t.redirectToCustomLandingPage.data,n=window.parent.document.createElement("form");n.setAttribute("method","post"),n.setAttribute("action",e);const o=window.parent.document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("name","data"),o.setAttribute("value",i),n.appendChild(o),window.parent.document.body.appendChild(n),n.submit()}}else riddle2API.msgBacklog.push(e)}window.riddle2API?riddle2API=window.riddle2API:initAPI();let scrollPosition=0;function sendPositionDataToIframes(){for(const n of riddle2API.riddles){var e=n.iframe.getBoundingClientRect().top+window.scrollY||window.pageYOffset,t=window.scrollY||window.pageYOffset,i=t+window.innerHeight;n.iframe.contentWindow?.postMessage({iframeOffsetTop:e,viewtop:t,viewbottom:i},"*"),n.LazyLoad(e,t,i)}}function preventSiteJump(){var e=document.documentElement;scrollPosition=(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}function pushTrackEvent(riddleEvent){riddleEvent.trackNetworks&&riddleEvent.trackNetworks.forEach((trackNetwork=>{try{if(trackNetwork.networkName===RiddleTrackNetworks.customer||trackNetwork.networkName===RiddleTrackNetworks.customTracking){const tnef=trackNetwork.eventFunction,ef=eval(tnef);ef(riddleEvent)}else{const e=trackNetwork,t={...riddleEvent};switch(delete t.trackNetworks,trackNetwork.networkName){case RiddleTrackNetworks.facebookPixel:const i=window[e.networkObjectName];i("trackCustom",riddleEvent.category,{eventAction:riddleEvent.action,eventName:riddleEvent.name,...t});break;case RiddleTrackNetworks.googleAnalytics:const n=window[e.networkObjectName];n("send","event",[riddleEvent.category],[riddleEvent.action],[riddleEvent.name],...t);break;case RiddleTrackNetworks.googleAnalytics4:const o=window[e.networkObjectName];o("event",riddleEvent.category,{event_name:riddleEvent.name,event_action:riddleEvent.action,...t});break;case RiddleTrackNetworks.googleTagManager:window[e.networkObjectName].push({event:"RiddleEvent",event_category:riddleEvent.category,event_action:riddleEvent.action,event_name:riddleEvent.name,...t});break;case RiddleTrackNetworks.matomoTag:window[e.networkObjectName].push(["trackEvent",riddleEvent.category,riddleEvent.action,riddleEvent.name]);break;case RiddleTrackNetworks.adobe:window[e.networkObjectName].track(riddleEvent.action,{...riddleEvent})}}}catch(e){console.log("[RiddleTrackingError] "+trackNetwork.networkName+" not found")}}))}document.addEventListener("scroll",(function(e){0!=scrollPosition&&(window.scrollTo(0,scrollPosition),scrollPosition=0),sendPositionDataToIframes()}))})();
